/*! caminio-ticketeer 2014-07-01 
* Copyright (c) 2014 TASTENWERK 
* Available via the MIT license.
* see: http://opensource.org/licenses/MIT for blueprint.
*/
!function(){"use strict";if("de"===currentLang){var a={ticketeer:"Ticketeer",tickets:"Tickets","nav.ticket_events":"Termine","ticket_event.new":"Neuer Termin","ticket_event.title":"Titel","ticket_event.subtitle":"Untertitel","ticket_event.description":"Beschreibung","ticket_event.really_delete":"{{name}} ({{starts}}) wirklich mit allen zugehörigen Reservierungen löschen?","ticket_event.deleted":"Termin {{starts}} wurde gelöscht","ticket_event.currently_labeled":"ist aktuell gelabelt mit","ticket_event.available_labels":"Verfügbare Labels","ticket_event.select_entry_first":"Bitte zuerst einen Veranstaltungstitel eingeben","ticket_event.coach":"WorkshopleiterIn","ticket_event.duration":"Dauer","ticket_event.saved":"Termin {{name}} wurde gespeichert","ticket_event.sold_out":"Ausverkauft","ticket_event.date":"Datum","job.coach":"WorkshopleiterIn","entry.select_or_create":"Veranstaltung auswählen oder neuen Namen eintragen","entry.nothing_found_create_new":"Keine Ergebnisse. [ENTER] legt neue Veranstaltung an","entry.created":"Veranstaltung {{name}} wurde angelegt","entry.saving_failed":"Veranstaltung {{name}} konnte nicht gespeichert werden","entry.marked_bookable":"Veranstaltung {{name}} {{starts}} ist jetzt buchbar","entry.marked_unbookable":"Veranstaltung {{name}} {{starts}} ist nicht buchbar","person.create":"Person erstellen","person.name":"Name","person.saved":"Person {{name}} wurde gespeichert","person.firstname":"Vorname","person.lastname":"Nachname","person.select_or_create":"Person auswählen oder neuen Namen eintragen","person.nothing_found_create_new":"Keine Ergebnisse. [ENTER] legt diesen Namen an","person.created":"Person {{name}} wurde erstellt","person.show_edit_form":"Formular dieser Person anzeigen","person.unlink_from_entry":"Verknüpfung mit diesem Eintrag lösen",venue:"Ort","venue.select_or_create":"Ort auswählen oder neuen Namen eintragen","venue.nothing_found_create_new":"Keine Ergebnisse. [ENTER] legt diesen Org an","venue.created":"Ort {{name}} wurde erstellt","tickets.available":"Verfügbar","tickets.booked":"Gebucht","tickets.quota":"Kontingent","tickets.waiting_list":"Warteliste","tickets.bookings":"Reservierungen","ticket.new":"Neue Reservierung",prices:"Preise","price.name":"Name","price.price":"Preis","price.edit_reductions":"{{count}} Ermäßigungen bearbeiten","price.reduction":"Ermäßigung","price.limited":"Limitiert",price:"Preis","price.excl":"exkl. USt.","price.incl":"inkl. USt.","price.vat":"USt. [%]","price.saved":"Preis {{name}} wurde gespeichert",currency:"Währung","order.nr":"Res.-Nr.","order.basket":"Einkaufskorb","order.items":"Tickets","order.add_ticket":"Ticket hinzufügen","order.total":"Gesamt","order.shipped":"Postzustellung","order.shipping_info":"Zustelladresse","order.billing_info":"Rechnungsadresse","order.status":"Bestellstatus","order.confirmed":"Bestätigt","order.paid":"Bezahlt","order.note":"Notiz","order.amount":"Anzahl","order.marked":"Die Bestellung gilt nun als {{title}}","order.unconfirmed":"Nicht bestätigt","order.confirmed_by_user":"bestätigt durch {{name}}","order.unconfirmed_desc":"Emailbestätigung noch ausständig","order.unpaid":"Unbezahlt","order.unpaid_desc":"Keine Bezahlinformationen vorhanden","order.paid_annotation":"Vermerk für diese Bezahlung (kann leer bleiben)","order.shipped_annotation":"Vermerk für die Zustellung (kann leer bleiben)","order.unshipped":"Nicht versand","order.unshipped_desc":"Wartet auf Versand","order.saved":"Reservierung {{name}} wurde gespeichert","order.category":"Kategorie","order.in_stock":"Verfügbar","order.required":"Eine Reservierung muss mindestens eine Kartenkategorie beinhalten!","order.item.saved":"Reservierung {{amount}}x {{name}} wurden gespeichert","customer.name":"Reservierungsname","customer.required":"Kein Kunde ausgewählt","customer.create_q":"Kunde als neuen Kunden anlegen?","customer.suggestions":"Gefundene Einträge","customer.info":"Kundeninformation","customer.name_differs":"Anderer Name","customer.use_ship_for_bill":"Zustelladresse verwenden","customer.name_required":"Vorname, Nachname oder Organisation erforderlich","customer.firstname":"Vorname","customer.lastname":"Nachname","customer.organization":"Organisation","customer.email":"Email","customer.phone":"Telefon","customer.street":"Straße","customer.zip":"PLZ","customer.city":"Stadt","error.missing_title":"Fehler: Ein Titel muss angegeben werden","error.quota_required":"Bitte ein Kontingent setzen (maximale Besucherzahl)"};for(var b in a)Em.I18n.translations[b]=a[b]}}(),function(){"use strict";if("en"===currentLang){var a={ticketeer:"Ticketeer",tickets:"Tickets","nav.ticket_events":"Events","ticket_event.new":"New Event","ticket_event.title":"Event","ticket_event.subtitle":"Subtitle","ticket_event.description":"Description","ticket_event.really_delete":"Really delete {{name}} ({{starts}}) (and according bookings)?","ticket_event.deleted":"Event {{starts}} has been deleted","ticket_event.currently_labeled":"is currently labeled with","ticket_event.available_labels":"Available labels","ticket_event.select_entry_first":"Please select an event (title) first","ticket_event.coach":"Coach","ticket_event.duration":"Duration","ticket_event.saved":"Event {{name}} has been saved","ticket_event.sold_out":"Sold out","ticket_event.date":"Date","job.coach":"Coach","entry.select_or_create":"Select event or enter a new name","entry.nothing_found_create_new":"No matches. Press [ENTER] to create an event with that name","entry.created":"Event {{name}} has been created","entry.saving_failed":"Event {{name}} failed to save","entry.marked_bookable":"Event {{name}} {{starts}} is now bookable by public","entry.marked_unbookable":"Event {{name}} {{starts}} is not bookable by public any longer","person.create":"Create a person","person.name":"Name","person.saved":"Person {{name}} has been saved","person.firstname":"Firstname","person.lastname":"Lastname","person.select_or_create":"Select person or create a new one","person.nothing_found_create_new":"no matches. Press [ENTER] to create a person with that name","person.created":"Person {{name}} has been created","person.show_edit_form":"go to/edit this person","person.unlink_from_entry":"Unlink from this entry",venue:"Venue","venue.select_or_create":"Select venue or enter a new name","venue.nothing_found_create_new":"No matches. Press [ENTER] to craete a venue with that name","venue.created":"Venue {{name}} has been created","tickets.available":"available","tickets.booked":"booked","tickets.quota":"Quota","tickets.waiting_list":"Waiting list","tickets.bookings":"Bookings","ticket.new":"New booking",prices:"Prices","price.name":"Name","price.price":"Price","price.edit_reductions":"Edit {{count}} concessions","price.reduction":"Concession","price.limited":"Limited",price:"Price","price.excl":"excl. VAT","price.incl":"incl. VAT","price.vat":"VAT [%]","price.saved":"Price for {{name}} has been saved",currency:"Currency","order.nr":"No.","order.basket":"Basket","order.items":"Tickets","order.add_ticket":"Add Ticket","order.total":"Total","order.shipped":"Ship via snail mail","order.shipping_info":"Shipping info","order.billing_info":"Billing info","order.status":"Order status","order.confirmed":"Confirmed","order.paid":"paid","order.note":"note","order.amount":"amount","order.marked":"Order is now {{title}}","order.unconfirmed":"unconfirmed","order.confirmed_by_user":"confirmed by {{name}}","order.unconfirmed_desc":"Awaiting confirmation email","order.unpaid":"Unpaid","order.unpaid_desc":"No payment information available","order.paid_annotation":"Annotation (optional)","order.shipped_annotation":"Annotation (optional)","order.unshipped":"Not shipped","order.unshipped_desc":"Waiting for shipping","order.saved":"Order {{name}} has been saved","order.category":"Category","order.in_stock":"Available","order.required":"a Booking must have at least one category","order.item.saved":"Booking {{amount}}x {{name}} has been saved","customer.name":"Booking name","customer.required":"Customer required","customer.create_q":"No matches. Create this information as a new customer?","customer.suggestions":"Found matches","customer.info":"Customer information","customer.name_differs":"Different name","customer.use_ship_for_bill":"use shipping information","customer.name_required":"Firstname or lastname or organization is required","customer.firstname":"Firstname","customer.lastname":"Lastname","customer.organization":"Organization","customer.email":"Email","customer.phone":"Phone","customer.street":"Street","customer.zip":"Zip","customer.city":"City","error.quota_required":"Please set a quota (limitation of participants)","error.missing_title":"Error: Title required"};for(var b in a)Em.I18n.translations[b]=a[b]}}(),function(a){"use strict";a.TicketEventsTableController=a.TableController.extend({sortAscending:!0,tableHeaders:Em.A([{name:"starts",ttitle:Em.I18n.t("date"),width:"120px"},{name:"starts",ttitle:Em.I18n.t("time"),width:"100px"},{name:"lineup_entry.curTranslation.title",ttitle:Em.I18n.t("ticket_event.title")},{name:"lineup_org.curTranslation.title",title:"venue",ttitle:Em.I18n.t("venue")},{name:"quota",width:"120px",ttitle:Em.I18n.t("tickets.quota")},{name:"waitingList",width:"120px",ttitle:Em.I18n.t("tickets.waiting_list")}])})}(App),function(){"use strict";App.TicketEventItemController=App.TableItemController.extend({init:function(){this.set("shopOrders",this.store.find("shop_order",{lineup_event:this.get("content.id"),waiting:!1}))},progressBarStyles:function(){var a=this.get("content"),b=this.get("orders")/a.get("quota")*100,c="#59e";return b>80&&(c="#fc0"),b>100&&(c="#d00"),b>=100?(b=100,this.set("isSoldOut",!0)):this.set("isSoldOut",!1),"width: "+b+"%; background-color: "+c+";"}.property("orders"),orders:function(){var a=0;return this.get("shopOrders").forEach(function(b){a+=b.get("totalAmount")}),a}.property("shopOrders.@each"),actions:{toggleBookable:function(){var a=this.get("content");a.set("bookable",!a.get("bookable")),a.get("lineup_entry").save().then(function(){"draft"===a.get("status")?notify("info",Em.I18n.t("entry.marked_bookable",{name:a.get("lineup_entry.curTranslation.title"),starts:a.get("starts")})):notify("info",Em.I18n.t("entry.marked_unbookable",{name:a.get("lineup_entry.curTranslation.title"),starts:a.get("starts")}))}).catch(function(){notify("error",Em.I18n.t("entry.saving_failed",{name:a.get("lineup_entry.curTranslation.title")}))})},editItem:function(a){this.transitionToRoute("ticket_events.edit",a.get("id"))},goToOrders:function(a){this.transitionToRoute("ticket_orders",a.get("id"))}}})}.call(),function(a){"use strict";function b(a){a.get("content.lineup_entry.lineup_jobs").toArray().forEach(function(b){b.get("title")===Em.I18n.t("job.coach")&&a.get("content.lineup_entry.lineup_jobs").removeObject(b)})}a.TicketEventsEditController=Ember.ObjectController.extend({availableVenues:Em.A(),availablePeople:Em.A(),availableLabels:Em.A(),availableEntries:Em.A(),isWorkshopStyle:function(){return"shop"in domainSettings&&"workshop"===domainSettings.shop.type}.property(),firstCoach:function(){if(this.get("content.lineup_entry.lineup_jobs")){var a=this.get("content.lineup_entry.lineup_jobs").findBy("title","coach");return a?a.get(a.get("length")>0?"firstObject.lineup_person":"lineup_person"):void 0}}.property("content.lineup_entry.lineup_jobs.@each"),titleErrorObserver:function(){Em.isEmpty(this.get("content.title"))||this.set("titleError",!1)}.observes("content.title"),quotaErrorObserver:function(){Em.isEmpty(this.get("content.quota"))||this.set("quotaError",!1)}.observes("content.quota"),actions:{changeLang:function(b){var c=this.get("content.translations").find(function(a){return a.get("locale")===b});c||(c=this.store.createRecord("translation",{locale:b,title:this.get("content.curTranslation.title"),subtitle:this.get("content.curTranslation.subtitle"),aside:this.get("content.curTranslation.aside"),content:this.get("content.curTranslation.content")}),this.get("content.translations").pushObject(c)),a.set("_curLang",b)},save:function(){var a=this,b=this.get("content.lineup_entry");return b&&b.get("curTranslation.title")?this.get("content.quota")?void b.save().then(function(){a.get("content.id")||a.get("content").deleteRecord(),notify("info",Em.I18n.t("ticket_event.saved",{name:b.get("curTranslation.title")})),a.transitionToRoute("ticket_events")}):(this.set("quotaError",!0),$("#entry-quota").focus(),notify("error",Em.I18n.t("error.quota_required"))):(b&&b.set("titleError",!0),$("#entry-title").focus(),notify("error",Em.I18n.t("error.missing_title")))},cancel:function(){var a=this.get("content");a.get("id")||a.deleteRecord(),this.transitionToRoute("ticket_events")},remove:function(a){var b=this;bootbox.confirm(Em.I18n.t("ticket_event.really_delete",{name:a.get("lineup_entry.curTranslation.title"),starts:moment(a.get("starts")).format("LLLL")}),function(c){if(c){var d=a.get("lineup_entry");a.deleteRecord(),d.save().then(function(){notify("info",Em.I18n.t("ticket_event.deleted",{starts:moment(a.get("starts")).format()})),b.transitionToRoute("ticket_events")})}})},addCoach:function(a,c){if(!this.get("content.lineup_entry"))return c.select2("val",null),bootbox.alert(Em.I18n.t("ticket_event.select_entry_first"));var d=this.store.getById("lineup_person",a),e=this.store.createRecord("lineup_job",{title:"coach",lineup_person:d});b(this),this.get("content.lineup_entry.lineup_jobs").pushObject(e),this.get("content").send("becomeDirty"),c.select2("val",e.get("lineup_person.id"))},createCoach:function(c,d){var e=this;if(!this.get("content.lineup_entry"))return bootbox.alert(Em.I18n.t("ticket_event.select_entry_first"));var f=this.store.createRecord("lineup_person",{name:c}),g=this.store.createRecord("translation",{locale:a._curLang});f.get("translations").pushObject(g),f.set("curTranslation",g),f.save().then(function(){notify("info",Em.I18n.t("person.created",{name:f.get("name")})),e.get("availablePeople").pushObject(f);var a=e.store.createRecord("lineup_job",{title:"coach",lineup_person:f});b(e),e.get("content.lineup_entry.lineup_jobs").pushObject(a),d.append('<option value="'+f.get("id")+'">'+f.get("name")+"</option>"),d.select2("val",f.get("id"))})},selectVenue:function(a,b){var c=this.store.getById("lineup_org",a);this.get("content").set("lineup_org",c),this.get("content").send("becomeDirty"),b.select2("val",c.get("id"))},createVenue:function(b,c){var d=this,e=this.store.createRecord("lineup_org"),f=this.store.createRecord("translation",{locale:a._curLang,title:b});e.get("translations").pushObject(f),e.set("curTranslation",f),e.save().then(function(){notify("info",Em.I18n.t("venue.created",{name:e.get("curTranslation.title")})),d.get("availableVenues").pushObject(e),d.get("content").set("lineup_org",e),d.get("content").send("becomeDirty"),c.select2("val",e.get("id"))})},selectEntry:function(a,b){var c=this.store.getById("lineup_entry",a);this.get("content").set("lineup_entry",c),c.get("lineup_events").findBy("id",this.get("content.id"))||c.get("lineup_events").pushObject(this.get("content")),this.get("content").send("becomeDirty"),b.select2("val",c.get("id"))},createEntry:function(b,c){var d=this,e=this.store.createRecord("lineup_entry"),f=this.store.createRecord("translation",{locale:a._curLang,title:b});e.get("translations").pushObject(f),e.set("curTranslation",f),e.save().then(function(){notify("info",Em.I18n.t("entry.created",{name:e.get("curTranslation.title")})),d.get("availableEntries").pushObject(e),d.get("content").set("lineup_entry",e),d.get("content").send("becomeDirty"),c.select2("val",e.get("id"))})},addPrice:function(){var b=this.store.createRecord("price",{vat:a._shopSettings.get("vat")});this.set("curPrice",b)},savePrice:function(){var a=this.get("curPrice"),b=this;a.get("id")||this.get("content.prices").pushObject(a),this.get("content.lineup_entry").save().then(function(){notify("info",Em.I18n.t("price.saved",{name:a.get("name")})),b.set("curPrice",null)})},cancelPrice:function(){var a=this.get("curPrice");a.get("id")||this.get("content.prices").removeObject(a),this.set("curPrice",null)}}}),a.TicketEventsNewController=a.TicketEventsEditController.extend()}(App),function(a){"use strict";a.TicketsController=Em.ObjectController.extend({})}(App),function(a){"use strict";a.TicketOrdersTableController=a.TableController.extend({sortAscending:!0,tableHeaders:Em.A([{name:"num",ttitle:Em.I18n.t("order.nr")},{name:"shop_customer.name",ttitle:Em.I18n.t("customer.name")},{name:"totalAmount",ttitle:Em.I18n.t("order.amount"),width:"80px"},{name:"categories",ttitle:Em.I18n.t("order.category")},{name:"totalPrice",align:"right",ttitle:Em.I18n.t("price")}])})}(App),function(a){"use strict";a.TicketOrderEditController=Ember.ObjectController.extend({errors:Em.Object.create(),customerNameError:function(){return this.get("errors.customerName")}.property("errors.customerName"),updateNameErrors:function(){(this.get("content.shop_customer.firstname")||this.get("content.shop_customer.lastname")||this.get("content.shop_customer.organziation"))&&this.get("errors").set("customerName",null)}.observes("content.shop_customer.firstname","content.shop_customer.lastname","content.shop_customer.organization"),actions:{addTicket:function(){var a=this.store.createRecord("order_item",{price:this.get("content.lineup_event.prices.firstObject")});a.set("isEditing",!0),this.get("content.order_items").pushObject(a)},save:function(){function a(){b.get("content.order_items").forEach(function(a){a.get("isEditing")&&a.set("isEditing",!1)}),b.get("content.order_items").toArray().forEach(function(a){a.get("id")||(console.log("record",a.get("id")),b.get("content.order_items").removeObject(a))}),notify("info",Em.I18n.t("order.item.saved",{name:c.get("num")}))}var b=this,c=this.get("content");if(c.get("order_items.length")<1)return bootbox.alert(Em.I18n.t("order.required"));if(!c.get("shop_customer"))return bootbox.alert(Em.I18n.t("customer.required"));if(this.get("content.isNew")){if(!this.get("content.shop_customer.firstname")&&!this.get("content.shop_customer.lastname")&&!this.get("content.shop_customer.organization"))return b.get("errors").set("customerName",Em.I18n.t("customer.name_required")),notify("error",Em.I18n.t("customer.name_required"));if(this.get("content.shop_customer.isNew"))return bootbox.confirm(Em.I18n.t("customer.create_q"),function(c){c&&b.get("content.shop_customer").save().then(function(){b.get("content").save().then(a)})})}this.get("content").save().then(a)},goToTickets:function(){this.transitionToRoute("ticket_orders",this.get("content.lineup_event.id"))},selectCustomer:function(b){this.get("content").set("shop_customer",b),a._suggestedCustomers.clear()},closeAutoSuggestions:function(){a._suggestedCustomers.clear()}}}),a.TicketOrdersNewController=a.TicketOrderEditController.extend()}(App),function(a){"use strict";a.PriceItemController=Em.ObjectController.extend({actions:{editPrice:function(a){this.get("parentController").set("curPrice",a)},removePrice:function(a){a.deleteRecord()}}})}(App),function(a){"use strict";a.OrderItemController=a.TableItemController.extend({actions:{goToOrder:function(a){this.transitionToRoute("ticket_order.edit",a.get("id"))}}})}(App),function(a){"use strict";a.OrderItemsItemController=a.TableItemController.extend({actions:{cancel:function(){this.get("content.id")?this.get("content").set("isEditing",!1):(this.get("parentController.content.order_items").removeObject(this.get("content")),this.get("content").deleteRecord())},toggleEdit:function(){this.get("parentController.content.order_items").forEach(function(a){a.get("isEditing")&&a.set("isEditing",!1)}),this.get("content").set("isEditing",!0)},remove:function(a){this.get("parentController.content.order_items").removeObject(a),a.deleteRecord()},closeForm:function(a){a.set("isEditing",!1)}}}),a.TicketOrdersNewController=a.TicketOrderEditController.extend()}(App),function(a){"use strict";a.LineupEvent.reopen({quota:DS.attr("number"),bookable:DS.attr("boolean",{defaultValue:!0}),prices:DS.hasMany("price",{embedded:"always"})}),a.ShopOrder.reopen({lineup_event:DS.belongsTo("lineup_event",{embedded:"keys"}),waiting:DS.attr("boolean",{defaultValue:!1})})}(App),function(a){"use strict";a.EventLabelsComponent=a.LabelsComponent.extend()}(App),function(a){"use strict";a.TicketEventsEditView=Em.View.extend({templateName:"ticket_events/new",didInsertElement:function(){this.$(".timepicker").caminioTimepicker()}}),a.TicketEventsNewView=a.TicketEventsEditView.extend(),a.DatePickerView=Em.View.extend({tagName:"div",attributeBindings:["id","events","owner"],classNames:["ui-datepicker-inline"],didInsertElement:function(){var a=this.get("controller.content");this.$().attr("data-date",moment().format("YYYY-MM-DD")),this.$().datepicker({format:"yyyy-mm-dd",language:currentLang,weekStart:1}).on("changeDate",function(b){a.set("startsDate",moment(b.date).format("YYYY-MM-DD"))}).datepicker("setDate",a.get("startsDate"))}})}(App),function(a){"use strict";a.TicketEventsTableView=Ember.View.extend({didInsertElement:function(){$(this.$("table.caminio thead .sortable-asc")[0]).click()},removeLoader:function(){$(".caminio-table-wrapper").removeClass("loading")}.on("didInsertElement")})}(App),function(a){"use strict";a.TicketOrderEditView=Em.View.extend({templateName:"ticket_orders/new",didInsertElement:function(){}}),a.TicketOrdersNewView=a.TicketOrderEditView.extend()}(App),function(a){"use strict";function b(a,b){a.set("model",b),a.get("availablePeople").clear(),this.store.all("lineup_person").forEach(function(b){a.get("availablePeople").pushObject(b)}),a.get("availableVenues").clear(),this.store.all("lineup_org").forEach(function(b){a.get("availableVenues").pushObject(b)}),a.get("availableEntries").clear(),this.store.all("lineup_entry").forEach(function(b){a.get("availableEntries").pushObject(b)})}function c(a,b){function c(a){d.store.find("lineup_entry",{"lineup_events._id":b.params.id}).then(function(c){var d=c.get("firstObject");a(d.get("lineup_events").findBy("id",b.params.id))})}var d=this,e=new Ember.RSVP.Promise(c);return e}a._curLang=currentLang,a.Router.map(function(){this.resource("ticket_events",function(){this.route("table")}),this.resource("ticket_orders",{path:"/ticket_orders/:id"},function(){this.route("table")}),this.resource("ticket_orders.new",{path:"/ticket_orders/:id/new"}),this.resource("ticket_order.edit",{path:"/ticket_order/:id/edit"}),this.resource("ticket_events.new",{path:"/ticket_events/new"}),this.resource("ticket_events.edit",{path:"/ticket_events/:id/edit"})}),a.IndexRoute=Ember.Route.extend({redirect:function(){this.transitionTo("ticket_events")}}),a.TicketEventsRoute=Em.Route.extend({model:function(){return this.store.find("lineup_entry",{"lineup_events.starts":"gte("+moment().format("YYYY-MM-DD")+")"})},setupController:function(){var a=this.controllerFor("ticket_events_table");a.set("model",this.store.all("lineup_event"))},renderTemplate:function(){this.render(),this.render("ticket_events.table",{into:"ticket_events",outlet:"table",controller:"ticket_events_table"})}}),a.TicketEventsNewRoute=Ember.Route.extend({model:function(){var a=this.store.createRecord("lineup_event");return a},setupController:b}),a.TicketEventsEditRoute=Ember.Route.extend({model:c,setupController:b}),a.TicketOrdersRoute=Ember.Route.extend({model:c,setupController:function(a,b){var c=this.controllerFor("ticket_orders_table");c.set("model",this.store.find("shop_order",{lineup_event:b.get("id")})),a.set("model",b)},renderTemplate:function(){this.render(),this.render("ticket_orders.table",{into:"ticket_orders",outlet:"table",controller:"ticket_orders_table"})}}),a.TicketOrdersNewRoute=Ember.Route.extend({model:c,setupController:function(b,c){a._suggestedCustomers=Em.A();var d=this.store.createRecord("shop_order");d.set("shop_customer",this.store.createRecord("shop_customer")),$.getJSON("/caminio/shop_orders/count").done(function(a){d.set("num",caminio.util.createNum(a.count+1))}),d.set("lineup_event",c),b.set("model",d)}}),a.TicketOrderEditRoute=Ember.Route.extend({model:function(a,b){return this.store.find("shop_order",b.params.id)}}),a.ApplicationView=Em.View.extend({didInsertElement:function(){setupCaminio(this.$())}}),a.ApplicationRoute=Em.Route.extend({beforeModel:function(){function b(b){c.store.find("user").then(function(){c.store.find("lineup_entry").then(function(){c.store.find("lineup_org",{type:"venue"}).then(function(){c.store.find("lineup_person").then(function(){c.store.find("label",{type:"regexp(/shop|lineup/)"}).then(function(d){a.set("_availableLabels",d),c.store.find("shop_setting").then(function(c){a._shopSettings=c,c.content.length>0&&(a._shopSettings=c.content[0]),b()})})})})})})}var c=this,d=new Ember.RSVP.Promise(b);return d}})}(App);