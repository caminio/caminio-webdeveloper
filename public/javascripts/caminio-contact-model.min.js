/*! caminio-contacts 2014-07-01 
* Copyright (c) 2014 TASTENWERK 
* Available via the MIT license.
* see: http://opensource.org/licenses/MIT for blueprint.
*/
(function(){"use strict";window.App.Contact=DS.Model.extend({tags:DS.attr("array"),favorite:DS.attr("array",{defaultValue:[currentUser._id]}),notes:DS.hasMany("note",{embedded:"always"}),labels:DS.hasMany("label",{async:!0,embedded:"keys"}),createdAt:DS.attr("date",{defaultValue:new Date}),updatedAt:DS.attr("date",{defaultValue:new Date}),updatedBy:DS.belongsTo("user"),createdBy:DS.belongsTo("user"),fields:DS.attr("object"),_getHintField:function(a){var b=this,c="";return App._hintFields.some(function(d){return d.get("hint")===a?(c=b.get("fields."+d.get("contactField")),!0):void 0}),c},firstname:function(){return this._getHintField("firstname")}.property("fields"),lastname:function(){return this._getHintField("lastname")}.property("fields"),about:function(){return this._getHintField("about")}.property("fields"),name:function(){var a=this._getHintField("firstname")||"",b=this._getHintField("lastname")||"";return(a.length>0?a:"")+(a.length>0&&b.length>0?" ":"")+(b.length?b:"")}.property("fields"),emails:function(){var a=this,b=[];return App._hintFields.forEach(function(c){if("email"===c.get("hint")){var d=a.get("fields."+c.get("contactField")),e=c.label;d&&d.length>0&&b.push({email:d,title:e+": "+d,label:e,mailto:"mailto:"+d})}}),b}.property("fields"),phones:function(){var a=this,b=[];return App._hintFields.forEach(function(c){if("phone"===c.get("hint")){var d=a.get("fields."+c.get("contactField")),e=c.label;d&&d.length>0&&b.push({phone:d,title:e+": "+d,label:e,mailto:"tel:"+d})}}),b}.property("fields"),org:function(){return this._getHintField("organization")}.property("fields"),city:function(){return this._getHintField("city")}.property("fields"),zip:function(){return this._getHintField("zip")}.property("fields"),street:function(){return this._getHintField("street")}.property("fields"),country:function(){return this._getHintField("country")}.property("fields"),state:function(){return this._getHintField("state")}.property("fields"),position:function(){return this._getHintField("position")}.property("fields"),isFavorite:function(){return this.get("favorite").indexOf(currentUser._id)>=0}.property("favorite")})}).call(),function(){"use strict";window.App.ContactField=DS.Model.extend({name:DS.attr("string"),type:DS.attr("string"),css:DS.attr("string"),sortable:DS.attr("boolean",{defaultValue:!0}),openDiv:DS.attr("boolean",{defaultValue:!1}),horizontalLine:DS.attr("boolean",{defaultValue:!1}),altFormTitle:DS.attr("string"),closeDiv:DS.attr("boolean",{defaultValue:!1}),tableCss:DS.attr("string"),value:DS.attr("string"),hidden:DS.attr("boolean"),hint:DS.attr(),label:DS.attr(),hiddenInForm:DS.attr("boolean"),position:DS.attr("number"),defaultValue:DS.attr("string"),transformer:DS.attr("string"),contactField:DS.attr("string"),contactTemplateId:DS.attr("string"),availableOptions:DS.attr("array"),spare:DS.attr("boolean"),classes:DS.attr("string"),placeholder:DS.attr("string"),namespace:DS.attr("string"),validator:DS.attr("string"),computeClasses:function(){var a=this.get("classes");return a&&a.length>0?a:"checkbox"===this.get("type")?"col-md-10":""}.property("classes"),isCustomDiv:function(){return this.get("classes")&&this.get("classes").indexOf("col-md-offset-2")<0}.property("classes"),availableOptionsObserver:function(a){a._attributes.availableOptions&&"string"==typeof a._attributes.availableOptions&&this.set("availableOptions",a._attributes.availableOptions.split(","))}.observes("availableOptions"),calculateTableStyle:function(){return this.get("tableCss")?this.get("tableCss"):""}.property("tableCss"),isTextbox:function(){return this.get("type").match(/^text/)}.property("type"),isTextarea:function(){return"textarea"===this.get("type")}.property("type"),isRadio:function(){return"radio"===this.get("type")}.property("type"),isCheckbox:function(){return"checkbox"===this.get("type")}.property("type"),isSelect:function(){return"select"===this.get("type")}.property("type")}),Ember.Inflector.inflector.irregular("contactField","contact_fields")}.call();