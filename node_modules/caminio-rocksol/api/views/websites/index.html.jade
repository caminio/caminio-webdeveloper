extends ../../../../caminio-ui/api/views/layouts/application

append head
  if env === 'production'
    link( rel='stylesheet', href='/stylesheets/caminio-media.min.css' )
    link( rel='stylesheet', href='/stylesheets/caminio-rocksol.min.css' )
    link( rel='stylesheet', href='/stylesheets/markdown.min.css' )
  else
    link( rel='stylesheet', href='/stylesheets/markdown/ghostdown.css' )
    link( rel='stylesheet', href='/stylesheets/markdown/github-styles.css' )
    link( rel='stylesheet', href='/stylesheets/caminio-rocksol/3rdparty/leaflet.css' )
    link( rel='stylesheet', href='/stylesheets/3rdparty/ui-datepicker.css' )
    link( rel='stylesheet', href='/stylesheets/caminio-rocksol/websites.css' )
    link( rel='stylesheet', href='/stylesheets/caminio-media/media_manager.css' )
    link( rel='stylesheet', href='/stylesheets/caminio-media/3rdparty/jcrop.min.css' )

append foot

  // script(type='text/javascript').
  //   var siteComponents = [];
  // each siteComp in siteComponents
  //   script(type='text/javascript').
  //     siteComponents.push( { name: '!{siteComp.name}' } );

  if env === 'production'
    script(type='text/javascript', src='/javascripts/caminio-rocksol.min.js')
    script(type='text/javascript', src='/javascripts/caminio-media.min.js')
    script(type='text/javascript', src='/javascripts/caminio-markdown.min.js')
  else
    script(type='text/javascript', src='/javascripts/caminio/ember-tree.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/locales/#{currentLang}.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/router.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/models/translation.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/models/pebble.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/models/webpage.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/models/activity.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/controllers/webpages_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/controllers/webpages_edit_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/controllers/pebble_item_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/edit_webpage_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/webpage_tree_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/webpages_index_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/pebble_plugin_text_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/stats_visits_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/views/preview_view.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/components/webpage_component.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/components/meta_component.js')
    script(type='text/javascript', src='/javascripts/caminio-rocksol/components/pebbles_library_component.js')


    script(type='text/javascript', src='/javascripts/markdown/codemirror.js')
    script(type='text/javascript', src='/javascripts/markdown/marked.js')
    script(type='text/javascript', src='/javascripts/markdown/highlight.pack.js')
    script(type='text/javascript', src='/javascripts/markdown/renderer.js')

    script(type='text/javascript', src='/javascripts/caminio-media/3rdparty/jcrop.min.js')
    script(type='text/javascript', src='/javascripts/caminio-media/3rdparty/jquery.iframe-transport.js')
    script(type='text/javascript', src='/javascripts/caminio-media/3rdparty/jquery.fileupload.js')
    script(type='text/javascript', src='/javascripts/caminio-media/locales/#{currentLang}.js')
    script(type='text/javascript', src='/javascripts/caminio-media/controllers/mediafile_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-media/controllers/media_index_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-media/controllers/media_label_item_controller.js')
    script(type='text/javascript', src='/javascripts/caminio-media/components/media_manager_component.js')

  script(type="text/x-handlebars" data-template-name='navbar')
    include hbs/navbar.hbs
    
  script(type="text/x-handlebars" data-template-name="webpages/index")
    include hbs/webpages/index.hbs

  script(type="text/x-handlebars" data-template-name="components/webpage-meta")
    include hbs/webpages/meta_component.hbs

  script(type="text/x-handlebars" data-template-name="components/pebbles-library")
    include hbs/webpages/pebbles_library_component.hbs

  //each siteComp in siteComponents
  //  each compScript in siteComp.javascripts
  //    script(type='text/javascript', src='/caminio/domains/#{currentDomain.id}/javascripts/#{siteComp.name}/#{compScript}')
  //  script(type="text/x-handlebars" data-template-name="components/webpage-"+siteComp.name)
  //    !=siteComp.content


  script(type="text/x-handlebars" data-template-name="webpages/edit")
    include hbs/webpages/edit.hbs

  script(type="text/x-handlebars" data-template-name="media/index")
    include ../../../../caminio-media/api/views/media_manager/hbs/index.hbs

  script(type="text/x-handlebars" data-template-name="components/media-manager")
    include ../../../../caminio-media/api/views/media_manager/hbs/media_manager_component.hbs

  script(type="text/x-handlebars" data-template-name="media_manager/file")
    include ../../../../caminio-media/api/views/media_manager/hbs/file.hbs
  
  script(type="text/x-handlebars" data-template-name="media_manager/upload-container")
    include ../../../../caminio-media/api/views/media_manager/hbs/upload_container.hbs

  script(type="text/x-handlebars" data-template-name="media_manager/details")
    include ../../../../caminio-media/api/views/media_manager/hbs/details.hbs

  script(type="text/x-handlebars" data-template-name="media_manager/label")
    include ../../../../caminio-media/api/views/media_manager/hbs/label.hbs

  script(type="text/x-handlebars" data-template-name="media_manager/webpage-item")
    include ../../../../caminio-media/api/views/media_manager/hbs/webpage_item.hbs

  script(type="text/x-handlebars" data-template-name="webpage/tree-item")
    include hbs/webpages/tree_item_view.hbs

  // partial
  script(type="text/x-handlebars" data-template-name="webpages/tree")
    include hbs/webpages/_tree.hbs
  script(type="text/x-handlebars" data-template-name="webpages/preview")
    include hbs/webpages/_preview.hbs
  script(type="text/x-handlebars" data-template-name="webpages/overview")
    include hbs/webpages/_overview.hbs
  script(type="text/x-handlebars" data-template-name="_pebble_type_teaser")
    include hbs/pebbles/_pebble_type_teaser.hbs
  script(type="text/x-handlebars" data-template-name="pebble_plugins/text")
    include hbs/pebbles/text.hbs
  script(type="text/x-handlebars" data-template-name="pebble_plugins/video")
    include hbs/pebbles/video.hbs
  script(type="text/x-handlebars" data-template-name="pebble_plugins/events")
    include hbs/pebbles/events.hbs

block content

  aside#notifications.notifications
